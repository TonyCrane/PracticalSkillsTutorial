<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>lec1 - 2023ç§‹å†¬å®ç”¨æŠ€èƒ½æ‹¾é—</title>
    <link rel="shortcut icon" href="./favicon.ico" />
    <link rel="stylesheet" href="./dist/reset.css" />
    <link rel="stylesheet" href="./dist/reveal.css" />
    <link rel="stylesheet" href="./dist/theme/simple.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/github.css" />
    <script src="https://cdn.jsdelivr.net/npm/reveal.js-menu@2.1.0/menu.js"></script>

    <link rel="stylesheet" href="./assets/custom.css" />

  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section ><section data-markdown><script type="text/template">

<!-- .slide: data-background="lec1/cover.png" -->

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## æœ¬èŠ‚å†…å®¹

- äº†è§£ Linux
- åŒºåˆ† Shell ä¸ Terminal
- æŒæ¡ Shell åŸºç¡€å‘½ä»¤ï¼ŒåŒ…æ‹¬æ–‡ä»¶ä¸ç›®å½•æ“ä½œ
- äº†è§£ Shell çš„è¿›é˜¶æ¦‚å¿µï¼šé‡å®šå‘ã€ç®¡é“ç­‰
- äº†è§£ vim ç¼–è¾‘å™¨çš„åŸºæœ¬ç”¨æ³•ï¼Œä»¥åŠå¦‚ä½•è‡ªè¡Œå­¦ä¹ 
- äº†è§£ GNU make çš„åŸºæœ¬ç”¨æ³•ï¼Œä»¥åŠå¦‚ä½•è‡ªè¡Œå­¦ä¹ 
- äº†è§£ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·

</script></section></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

<div class="middle center">
<div style="width: 100%">

# Part.Îµ èƒŒæ™¯

â™¿ï¸â™¿ï¸â™¿ï¸ äº”åˆ†é’Ÿäº†è§£ Linux â™¿ï¸â™¿ï¸â™¿ï¸

</div>
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä¸»æµè®¡ç®—æœºæ“ä½œç³»ç»Ÿ

- Microsoft Windows (1985.11.20)
- macOS (2001.3.24)
- Linux (1991.9.17)

<div class="fragment">

> Linuxï¼šæˆ‘ä¼šä¸ºä½ æä¾›ä¸€åˆ‡å¿…è¦çš„å·¥å…·ã€‚è¯·ä½ ä¸ºè‡ªå·±æ‰€æ•²çš„æ¯ä¸€è¡Œå‘½ä»¤è´Ÿè´£ã€‚
>
> macOSï¼šæˆ‘ä¼šå°½å¯èƒ½åœ°ä¿æŠ¤ä½ ã€‚ä½ å¯ä»¥ä¸è¦æˆ‘çš„ä¿æŠ¤ï¼Œä½†è‹¥å¦‚æ­¤ï¼Œè¯·ä½ ä¸ºè‡ªå·±æ‰€æ•²çš„æ¯ä¸€è¡Œå‘½ä»¤è´Ÿè´£ã€‚
>
> Windowsï¼šæˆ‘æ˜¯ä½ å¦ˆ

</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä¸ºä»€ä¹ˆä¸ç”¨ Windowsï¼Ÿ

- è‡ƒè‚¿ï¼Œå†å²åŒ…è¢±å¤ªé‡
    - å®¶åº­ç‰ˆï¼Ÿæ——èˆ°ç‰ˆï¼Ÿä¸“ä¸šç‰ˆï¼Ÿä¼ä¸šç‰ˆï¼Ÿä¸“ä¸šå·¥ä½œç«™ç‰ˆï¼Ÿ
- é€‚åˆä½¿ç”¨ï¼Œä¸é€‚åˆå¼€å‘
    - ç¯å¢ƒå˜é‡ï¼Ÿç¼º `dll` æ–‡ä»¶ï¼ŸåŒ…ç®¡ç†å™¨ï¼Ÿ
- é—­æºå•†ä¸šä»˜è´¹è½¯ä»¶
- å…¼å®¹æ€§
    - Not software, but hardware
- ç¨³å®šæ€§
    - <span style="background-color: #0b61cd; color: white;">ä½ çš„ç”µè„‘é‡åˆ°é—®é¢˜ï¼Œéœ€è¦é‡æ–°å¯åŠ¨ã€‚ä½ å¯ä»¥é‡æ–°å¯åŠ¨ã€‚</span>
- å®‰å…¨æ€§
    - æ°¸æ’ä¹‹è“ï¼ˆ[CVE-2017-0144](https://www.cve.org/CVERecord?id=CVE-2017-0144)ï¼‰
    - è¿œç¨‹æ¡Œé¢ä»»æ„ä»£ç æ‰§è¡Œï¼ˆ[CVE-2019-0708](https://www.cve.org/CVERecord?id=CVE-2019-0708)ï¼‰
    - é”™è¯¯æŠ¥å‘ŠæœåŠ¡æƒé™æå‡ï¼ˆ[CVE-2023-36874](https://www.cve.org/CVERecord?id=CVE-2023-36874)ï¼‰

<aside class="notes"><p>ä½œä¸º CS äºº</p>
<p>s390x? armhf? ppc64?</p>
</aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## <ruby>å›¾å½¢åŒ–<rp>ï¼ˆ</rp><rt>GUI</rt><rp>ï¼‰</rp></ruby>çš„å‰ä¸–ä»Šç”Ÿ

<img src="lec1/apple-lisa.jpg" align="right" width="25%" style="padding-right: 30pt;">

- (1973) Xerox PARC ç ”ç©¶å°ç»„ï¼šXerox Alto
- (1983) Steve Jobs â€œæ‹¿â€æ¥ï¼šApple Lisa
- (1984) X.Org åŸºé‡‘ä¼šï¼šX çª—å£ç³»ç»Ÿï¼ˆX11ï¼‰
- (1985) å¾®è½¯ï¼šWindows 1.0

[å›¾ç‰‡æ¥æºï¼šÃlvaro IbÃ¡Ã±ez, CC BY 2.0, Wikimedia](https://commons.wikimedia.org/wiki/File:Apple_Lisa_(Little_Apple_Museum)_(8032162544).jpg)

<div class="fragment">

What before? **D**isk **O**perating **S**ystems

<img src="lec1/apple-dos.png" align="right" width="20%" style="padding-right: 30pt;">

- (1978) Apple DOS
- (1981) MS-DOS

</div>

<div class="fragment">

What after? ç™¾èŠ±é½æ”¾

- Aqua, GNOME, KDE, LXDE, Xfce, ...

<aside class="notes"><p>Windows 1.0 is a GUI for DOS</p>
<p>Aqua is GUI of macOS</p>
</div></aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä¸ºä»€ä¹ˆç”¨ Linuxï¼Ÿ

<div style="text-align: center;">
<img src="lec1/linus-torvald-first-linux-email.png" width="60%" style="margin: 0 auto;">

[comp.os.minix](https://groups.google.com/g/comp.os.minix/c/dlNtH7RRrGA/m/24ODVoLfAgAJ), 1991-08-25
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä¸ºä»€ä¹ˆç”¨ Linuxï¼Ÿ

- å†…æ ¸å¼€æºï¼Œç¤¾åŒºç»´æŠ¤
    - Android OS
    - [torvalds/linux](https://github.com/torvalds/linux)
- Free
    - as in *Free Beer* and *Free Speech*
- è½»é‡çº§
    - Alpine Linux çš„ Docker é•œåƒä»… 5MB
- ç¨³å®šæ€§
    - [äº²æ‰‹é€ æˆçš„è¿ç»´äº‹æ•…ï¼šåœ¨ Live CD ç¯å¢ƒä¸‹éƒ¨ç½²å¹¶è¿è¡Œäº† 8 ä¸ªæœˆ](https://v2ex.com/t/974678)
- å…¼å®¹æ€§
    - æ ‘è“æ´¾ç­‰å•æ¿è®¡ç®—æœº
    - æœ€ä¸æç«¯çš„ä¸€é›†ï¼š[åœ¨ Arduino Uno ä¸Šè¿è¡Œ Linux Kernel](https://hackaday.com/2023/10/13/because-you-can-linux-on-an-arduino-uno/)ï¼Œä¸»é¢‘ 700Hz

<div class="fragment">

- ~~çœ‹ç€æ¯” Windows professional åˆ°ä¸çŸ¥é“å“ªé‡Œå»äº†~~

</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä¸»æµçš„ Linux å‘è¡Œç‰ˆ

- [Slackware](http://www.slackware.com)ï¼šå†å²æœ€æ‚ ä¹…çš„å‘è¡Œç‰ˆ
- [Debian](https://www.debian.org)ï¼šå†å²ç¬¬äºŒæ‚ ä¹…çš„å‘è¡Œç‰ˆ
- [Arch Linux](https://archlinux.org)ï¼šå¯é«˜åº¦è‡ªå®šä¹‰çš„å‘è¡Œç‰ˆ
- [Ubuntu](https://ubuntu.com)ï¼šåŸºäº Debianï¼Œæœ€å¹¿æ³›ä½¿ç”¨çš„å‘è¡Œç‰ˆ
- [Deepin](https://www.deepin.org)ï¼šåŸºäº Debian çš„å›½äº§æ“ä½œç³»ç»Ÿ
- [Red Hat Enterprise Linux](https://redhat.com/rhel/)ï¼šåŸºäº CentOS çš„å•†ä¸šå‘è¡Œç‰ˆ
- [Kali Linux](https://www.kali.org)ï¼šåŸºäº Debianï¼Œé¢å‘å®‰å…¨å·¥ä½œè€…çš„å‘è¡Œç‰ˆ

<br>

<div class="fragment">

å¤ªå¤šäº†ï¼Œæˆ‘è¯¥é€‰å“ªä¸ªï¼Ÿ

</div>

</script></section></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

<div class="middle center">
<div style="width: 100%">

# Part.1 ä»€ä¹ˆæ˜¯ Shellï¼Ÿ

</div>
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## Are you a Shell?

- ä¸€ä¸ªé»‘é»‘çš„çª—å£ï¼Ÿ
- ä¸€ä¸ªè¾“å…¥å¥‡æ€ªå‘½ä»¤çš„åœ°æ–¹ï¼Ÿ
- ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆé«˜çº§å¾ˆé»‘å®¢çš„ç•Œé¢ï¼Ÿ

<div class="fragment">

âŒ è¿™äº›éƒ½ä¸æ˜¯ Shell âŒ

</div>

<div class="fragment">

è¿™äº›æè¿°æ‰€å½¢å®¹çš„çª—å£å…¶å®æ˜¯ Terminal

[What people think programming is vs. how it actually is](https://youtu.be/HluANRwPyNo)

</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä»€ä¹ˆæ˜¯ Terminal - èµ·æº

> <span style="font-family: ui-serif;">"end point of a railway line," 1888, from terminal (adj.); **sense of "device for communicating with a computer" is first recorded 1954.** Earlier "final part of a word" (1831).</span>
>
> -- [åœ¨çº¿è¯­æºå­¦è¯å…¸ (Online Etymology Dictionary)](https://www.etymonline.com/word/terminal)

<img src="lec1/VT100-terminal.png" align="right" width="30%" style="padding-right: 30pt;">

- æ—©æœŸè®¡ç®—æœºæ²¡æœ‰æ¡Œé¢ç¯å¢ƒï¼Œå”¯ä¸€çš„äº¤äº’æ–¹å¼æ˜¯é”®ç›˜
- ç”¨äºè¾“å…¥æ•°æ®ï¼Œè¿è¡Œç¨‹åºï¼Œå¹¶è·å¾—è¾“å‡ºçš„â€œç»ˆç«¯â€

[å›¾ç‰‡æ¥æºï¼šGorthmog, CC BY-SA 4.0, Wikimedia](https://commons.wikimedia.org/wiki/File:DEC_VT100_terminal_transparent.png)

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä»€ä¹ˆæ˜¯ Terminal - ç°ä»Š

- Terminal Emulatorï¼Œæ¨¡æ‹Ÿä¼ ç»Ÿç»ˆç«¯çš„è¡Œä¸º
- ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œæä¾›äº†ä¸€ä¸ªçª—å£ï¼Œå’Œè¾“å…¥è¾“å‡ºäº¤äº’çš„åŠŸèƒ½
- å†…éƒ¨è¿è¡Œçš„æ˜¯ Shellï¼ŒShell æ‰æ˜¯æ‰§è¡Œå‘½ä»¤å¾—åˆ°è¾“å‡ºçš„ä¸œè¥¿

<div class="fragment">

éƒ½æœ‰ä»€ä¹ˆå¸¸è§çš„ Terminal å‘¢ï¼Ÿ

</div>

<div class="fragment">

- **Windows**ï¼šWindows Terminalï¼ˆæ¨èï¼‰
- **Linux**ï¼šGnome Terminalã€Konsoleã€LXTerminal ç­‰
- **macOS**ï¼šTerminal.appã€iTerm2ï¼ˆæ¨èï¼‰ç­‰
- è·¨å¹³å°ï¼š
    - [Alacritty](https://alacritty.org)ï¼šåŸºäº Rust å¼€å‘
    - [Warp](https://warp.dev)ï¼šåŸºäº Rust å¼€å‘
    - [Hyper](https://hyper.is)ï¼šåŸºäº Electron å¼€å‘
    - ...

</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## So what is a Shell?

- â€œå£³å±‚â€ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç¨‹åºï¼Œæ˜¯ç”¨æˆ·ä¸ç³»ç»Ÿå†…æ ¸äº¤äº’çš„ç•Œé¢
- è´Ÿè´£æ¥æ”¶å¹¶è§£æè¾“å…¥ï¼Œäº¤ç»™æ›´åº•å±‚ï¼ˆæ“ä½œç³»ç»Ÿï¼‰æ¥æ‰§è¡Œï¼Œå¹¶è¿”å›è¾“å‡º

<div class="fragment">

éƒ½æœ‰ä»€ä¹ˆå¸¸è§çš„ Shell å‘¢ï¼Ÿ

</div>

<div class="fragment">

- Windows ä¸‹ï¼šcmd.exeã€PowerShell 5
- \*nix ä¸‹ï¼š
    - **sh**ï¼šBourne Shellï¼Œæœ€æ—©ã€æœ€ç»å…¸çš„ shell
    - **bash**ï¼šBourne Again Shellï¼Œæœ€å¸¸ç”¨çš„ shell
        - å¤§éƒ¨åˆ† Linux å‘è¡Œç‰ˆçš„é»˜è®¤ shell
    - **zsh**ï¼šZ Shellï¼ŒåŠŸèƒ½å¼ºå¤§ã€å¯é«˜åº¦è‡ªå®šä¹‰çš„ shell
        - macOS Catalina èµ·æˆä¸ºé»˜è®¤ shell
    - **fish**ï¼šFriendly Interactive Shellï¼Œå¼€ç®±å³ç”¨ã€å…¨å¹³å°çš„ shell
    - <ruby>ash<rp>(</rp><rt>Almquist Shell</rt><rp>)</rp></ruby>, <ruby>csh<rp>(</rp><rt>C Shell</rt><rp>)</rp></ruby>, <ruby>ksh<rp>(</rp><rt>Korn Shell</rt><rp>)</rp></ruby>, nushell, <ruby>pwsh<rp>(</rp><rt>PowerShell 7</rt><rp>)</rp></ruby>, xonsh, ...
</div>

<aside class="notes"><p>xonsh: conch</p>
</aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## Shell ä¸ Terminal

- Terminal ä»ç”¨æˆ·è·å–è¾“å…¥ï¼Œç„¶åä¼ é€’ç»™ Shellï¼Œç­‰å¾… Shell å¤„ç†å®Œåï¼Œå°†ç»“æœå†ä¼ é€’å›ç”¨æˆ·ï¼ˆæ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼‰
- Shell ä» Terminal æ‹¿åˆ°è¾“å…¥æŒ‡ä»¤ï¼Œè§£æåäº¤ç»™æ“ä½œç³»ç»Ÿæ‰§è¡Œï¼Œç„¶åå°†ç»“æœè¿”å›ç»™ Terminal

ä¸€äº›ä¾‹å­ï¼š

- \*nix ç³»ç»Ÿä¸‹ï¼Œç”¨æˆ·é»˜è®¤çš„ shell å¯ä»¥éšæ„æ›´æ¢
- Ctrl-C åˆ°åº•æ˜¯å¤åˆ¶è¿˜æ˜¯ä¸­æ–­ç¨‹åºï¼Ÿ
    - å’Œ Shell æ— å…³ï¼Œæ˜¯ Terminal çš„è¡Œä¸º
    - æ¯”å¦‚ macOS ä¸Š iTerm2 å°±å¯ä»¥éšæ„æ›´æ”¹æŒ‰é”®çš„è¿™äº›è¡Œä¸º
    - å¦‚æœå®šä¹‰äº† `^C` åº”è¯¥å¤åˆ¶ï¼Œé‚£ä¹ˆ Terminal å°±ä¼šç›´æ¥å¤åˆ¶å†…å®¹åˆ°å‰ªè´´æ¿
    - å¦‚æœå®šä¹‰äº† `^C` åº”è¯¥ä¸­æ–­ç¨‹åºï¼Œé‚£ä¹ˆ Terminal å°±å‘Šè¯‰ Shellï¼ŒShell å†é€šè¿‡ SIGINT ä¿¡å·é€šçŸ¥å†…æ ¸ä¸­æ–­ç¨‹åº

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä¸ºä»€ä¹ˆè¦ç”¨å‘½ä»¤è¡Œï¼Ÿå®ƒèƒ½åšä»€ä¹ˆï¼Ÿ

- å‘½ä»¤è¡Œä¹Ÿæ˜¯ä¸€ç§æ“ä½œè®¡ç®—æœºçš„æ–¹å¼ï¼Œç†è®ºä¸Šå¯ä»¥åšä»»ä½•äº‹æƒ…
- å¯ä»¥è®©ä½ æ‰‹åœ¨é”®ç›˜ä¸Šå°±èƒ½æ§åˆ¶ç”µè„‘ï¼Œè€Œä¸éœ€è¦é¼ æ ‡ç‚¹æ¥ç‚¹å»
- åœ¨æ²¡æœ‰æ˜¾ç¤ºå™¨çš„æœºå™¨ä¸Šï¼ˆä¾‹å¦‚é€šè¿‡ ssh è¿æ¥æœåŠ¡å™¨ï¼‰ï¼Œåªèƒ½é€šè¿‡å‘½ä»¤è¡Œæ“ä½œ

ä¸€ä¸ªå¤¸å¼ çš„ä¾‹å­ï¼šä½ ç”šè‡³å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æŸ¥çœ‹ç½‘é¡µï¼[fathyb/carbonyl](https://github.com/fathyb/carbonyl)

<div style="text-align: center;">
<img src="lec1/img1.png" width="65%" style="margin: 0 auto;">
</div>

<aside class="notes"><p>ä¸è€ƒè™‘ VNC ç­‰è¿œç¨‹æ¡Œé¢</p>
</aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä¸ºä»€ä¹ˆè¦ç”¨å‘½ä»¤è¡Œï¼Ÿå®ƒèƒ½åšä»€ä¹ˆï¼Ÿ

åˆ«å†ç”¨ Dev-C++ å†™ç¨‹åºäº†ï¼Œå°½æ—©ä½¿ç”¨ VSCode ä¸å‘½ä»¤è¡Œ gcc

```shell
$ cat a.c
#include <stdio.h>
int main(void) {
  puts("Hello world!");
}

$ gcc a.c -o a

$ ./a
Hello world!
```

å»ºè®®ç†Ÿè¯»å¹¶èƒŒè¯µï¼šã€Šè°ˆè°ˆå¦‚ä½•è®©è‡ªå·±çœ‹ä¸Šå»ã€é—»ä¸Šå»éƒ½åƒä¸€ä¸ª CS äººã€‹[CC98](https://www.cc98.org/topic/5370849) / [çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/p/539692975)

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## \* å…³äº zsh çš„ä¸€äº›æ¨èé…ç½®

- oh-my-zshï¼š<https://ohmyz.sh>ï¼Œä¸€ä¸ª zsh çš„é…ç½®æ¡†æ¶ï¼Œæ”¯æŒä¸»é¢˜ã€æ’ä»¶ç­‰é…ç½®
<blockquote style="font-family: ui-serif; font-size: 16pt;">Oh My Zsh will not make you a 10x developer...but you may feel like one!</blockquote>
- Powerlevel10kï¼ˆp10kï¼‰ï¼šä¸€ä¸ª oh-my-zsh çš„ä¸»é¢˜ï¼Œé…ç½®ç®€å•ï¼Œç¾è§‚
- æ’ä»¶ï¼š
    - gitï¼šoh-my-zsh è‡ªå¸¦æ’ä»¶ï¼Œæä¾› git ç›¸å…³çš„è‡ªåŠ¨è¡¥å…¨ä¸ alias
    - zï¼šå¿«é€Ÿè·³è½¬åˆ°æ›¾ç»è·³è½¬è¿‡çš„ç›®å½•
    - zsh-autosuggestionsï¼šè‡ªåŠ¨æç¤ºè¾“å…¥è¿‡çš„å†å²å‘½ä»¤
    - zsh-syntax-highlightingï¼šå‘½ä»¤è¯­æ³•é«˜äº®
    - ...

å…·ä½“å®‰è£…æ–¹æ³•ç­‰å¯å‚è€ƒï¼š<https://note.tonycrane.cc/cs/tools/shell/>

</script></section></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

<div class="middle center">
<div style="width: 100%">

# Part.2 åŸºç¡€ Shell å‘½ä»¤

</div>
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## Prompt èƒ½å‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆ

- Prompt å³å‘½ä»¤æç¤ºç¬¦ï¼Œç”¨æ¥ç­‰å¾…è¾“å…¥å¹¶ç»™ä½ æä¾›ä¸€äº›ä¿¡æ¯
- å…¶ä¸­æœ€é‡è¦çš„ä¿¡æ¯å°±æ˜¯<ruby>**å·¥ä½œè·¯å¾„**<rp>ï¼ˆ</rp><rt>Working directory</rt><rp>ï¼‰</rp></ruby>ï¼Œæ˜¯å½“å‰ shell æ‰€å¤„çš„â€œä½ç½®â€
    - ä¸€å®šè¦æ—¶æ—¶åˆ»åˆ»çŸ¥é“è‡ªå·±â€œåœ¨å“ªé‡Œâ€
    - âš ï¸ <span style="color: red">`rm -rf ./*`</span>
- é€šå¸¸è¿˜è¦æœ‰çš„ä¿¡æ¯æ˜¯å½“å‰æ­£åœ¨æ“ä½œçš„**ç”¨æˆ·**
    - å’Œæƒé™æœ‰å…³ï¼Œæ¯”å¦‚æ™®é€šç”¨æˆ·è¿˜æ˜¯ `root` ç­‰

<div class="fragment">

- å‘å…¶ä¸­è¾“å…¥å‘½ä»¤ç„¶åå›è½¦ï¼Œå°±å¯ä»¥æ‰§è¡Œå‘½ä»¤
- `pwd` è·å–å½“å‰è·¯å¾„
    - å¯è§ `~` ä»£è¡¨çš„å°±æ˜¯å½“å‰ç”¨æˆ·çš„ â€œhomeâ€ ç›®å½•
- *nix ä¸‹çš„è·¯å¾„åˆ†éš”ç¬¦æ˜¯ `/`ï¼ŒWindows ä¸‹æ˜¯ `\`
- æ€ä¹ˆæ²¡æœ‰ `C:\`ï¼Ÿ
    - Windows ä¸‹æœ‰å¤šä¸ªâ€œæ ¹ç›®å½•â€ï¼Œå³ä¸åŒâ€œç›˜ç¬¦â€ï¼Œæ¯”å¦‚ `C:\`ã€`D:\` ç­‰
    - \*nix æ²¡æœ‰åˆ†ç›˜æ¦‚å¿µï¼Œæ‰€æœ‰çš„æ–‡ä»¶éƒ½æŒ‚è½½åœ¨å”¯ä¸€çš„æ ¹ç›®å½• `/` ä¸‹

</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## è·¯å¾„ç›¸å…³å‘½ä»¤

- pwdï¼šè·å–å½“å‰è·¯å¾„ (print working directory)
- cd *path*ï¼šåˆ‡æ¢è·¯å¾„ (change directory)
    - *path* å¯ä»¥æ˜¯â€œç›¸å¯¹è·¯å¾„â€æˆ–è€…â€œç»å¯¹è·¯å¾„â€
    - *path* ä¸­ `~` ä»£è¡¨ homeï¼Œ`.` ä»£è¡¨å½“å‰è·¯å¾„ï¼Œ`..` ä»£è¡¨ä¸Šä¸€çº§è·¯å¾„

<br>

<div class="fragment">

å¦‚ä½•ä» `/home/45gfg9/` è¿›å…¥ `/usr/bin/`
- ç»å¯¹è·¯å¾„ï¼š`cd /usr/bin`
- ç›¸å¯¹è·¯å¾„ï¼š`cd ../../usr/bin`

</div>

<div class="fragment">

å¦‚ä½•ä» `/usr/` è¿›å…¥ `/usr/games/`
- ç»å¯¹è·¯å¾„ï¼š`cd /usr/games`
- ç›¸å¯¹è·¯å¾„ï¼š`cd games` æˆ–è€… `cd ./games`

</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## æ–‡ä»¶/ç›®å½•æ“ä½œå‘½ä»¤

- lsï¼šåˆ—å‡ºå½“å‰è·¯å¾„ä¸‹çš„æ–‡ä»¶å’Œç›®å½•
    - `-a`ï¼šåˆ—å‡ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶
    - `-l`ï¼šåˆ—å‡ºè¯¦ç»†ä¿¡æ¯ï¼ˆæ–‡ä»¶æƒé™ï¼Œå¤§å°ï¼Œä¿®æ”¹æ—¶é—´ï¼Œ...ï¼‰
- touch *file*ï¼šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶
- mkdir *dir*ï¼šåˆ›å»ºä¸€ä¸ªç›®å½•
- cp *src* *dst*ï¼šå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•
    - -rï¼šé€’å½’å¤åˆ¶ç›®å½•
- mv *src* *dst*ï¼šç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½•ï¼ˆé‡å‘½åï¼‰
- rm <em>files...</em>ï¼šåˆ é™¤æ–‡ä»¶
    - -rï¼šé€’å½’åˆ é™¤ç›®å½•ï¼›-fï¼šå¼ºåˆ¶åˆ é™¤
- find *path* -name *pattern*ï¼šåœ¨ *path* ä¸‹æŸ¥æ‰¾æ–‡ä»¶ååŒ¹é… *pattern* çš„æ–‡ä»¶

<aside class="notes"><p>Windows Folder, *nix Directory</p>
</aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## æ–‡ä»¶å†…å®¹æŸ¥çœ‹å‘½ä»¤

- cat <em>files...</em>ï¼šè¾“å‡ºä¸æ‹¼æ¥æ–‡ä»¶
    - -nï¼šå¸¦è¡Œå·è¾“å‡º
- head *file*ï¼šè¾“å‡º *file* å‰ 10 è¡Œ
    - -n *lines*ï¼šè¾“å‡º *lines* è¡Œ
- tail *file*ï¼šè¾“å‡º *file* å 10 è¡Œ
    - -n *lines*ï¼šè¾“å‡º *lines* è¡Œ
- more/less *file*ï¼šåˆ†é¡µè¾“å‡º *file* å†…å®¹
    - ç©ºæ ¼ç¿»é¡µï¼Œå›è½¦ä¸‹ä¸€è¡Œï¼Œq é€€å‡º
    - `less` çš„åŠŸèƒ½æ›´å¤šï¼Œæ¯”å¦‚æŸ¥æ‰¾ï¼Œæ›´å¥½çš„ç¿»é¡µç­‰ï¼Œç”¨æ³•è§ `less --help`
- hexdump *file*ï¼šä»¥åå…­è¿›åˆ¶è¾“å‡ºæ–‡ä»¶å†…å®¹
    - -Cï¼šå¹¶æ’è¾“å‡ºåå…­è¿›åˆ¶ä¸ ASCII
    - -n *N*ï¼šè¾“å‡ºå‰ *N* ä¸ªå­—èŠ‚

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## å…¶ä»–å‘½ä»¤

- manï¼šæŸ¥çœ‹å‘½ä»¤æ–‡æ¡£ï¼ˆmanualï¼‰
- echoï¼šè¾“å‡ºå­—ç¬¦ä¸²ï¼ˆå¸¸é…åˆé‡å®šå‘/ç®¡é“ä½¿ç”¨ï¼‰
- whoamiï¼šè·å–å½“å‰ç”¨æˆ·
- whereis/which/whenceï¼šæŸ¥æ‰¾å‘½ä»¤æ‰€åœ¨ä½ç½®
- clearï¼šæ¸…å±
- chmodï¼šæ›´æ”¹æ–‡ä»¶æƒé™
- psï¼šæ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯
- dateï¼šè·å–å½“å‰æ—¥æœŸæ—¶é—´
- killï¼šæ€æ­»è¿›ç¨‹ï¼ˆå‘è¿›ç¨‹å‘é€ä¿¡å·ï¼‰
- grepï¼šæœç´¢æ–‡ä»¶å†…å®¹ï¼ˆå¸¸é…åˆé‡å®šå‘/ç®¡é“ä½¿ç”¨ï¼‰
- diffï¼šæ¯”è¾ƒæ–‡ä»¶/ç›®å½•å†…å®¹
- curlï¼šå‘é€ HTTP è¯·æ±‚ï¼›wgetï¼šä¸‹è½½æ–‡ä»¶
- ...

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## é‡å®šå‘

- å³æ–‡ä»¶æµé‡å®šå‘
- ä¸‰ç§æµï¼šstdin æ ‡å‡†è¾“å…¥æµï¼Œstdout æ ‡å‡†è¾“å‡ºæµï¼Œstderr æ ‡å‡†é”™è¯¯æµ
- å¦‚ä½•æ›´ä¾¿æ·åœ°å°†è¾“å‡ºå­˜å…¥æ–‡ä»¶/å°†æ–‡ä»¶å†…å®¹ä½œä¸ºç¨‹åºè¾“å…¥ï¼Ÿé€šè¿‡é‡å®šå‘
- é€šè¿‡ > *file* å°† stdout é‡å®šå‘åˆ°æ–‡ä»¶ï¼Œé€šè¿‡ < *file* å°†æ–‡ä»¶é‡å®šå‘åˆ° stdin
- é€šè¿‡ 2> *file* å°† stderr é‡å®šå‘åˆ°æ–‡ä»¶
    - 2 æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿstderr çš„æ–‡ä»¶æè¿°ç¬¦
- ä¸¤ä¸ªå³ç®­å¤´ï¼ˆå¤§äºå·ï¼‰>> è¡¨ç¤ºè¿½åŠ æ¨¡å¼ï¼Œå³ä¸è¦†ç›–åŸæ–‡ä»¶ï¼Œè€Œæ˜¯è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾
- é€šè¿‡ &> *file* å°† stdout å’Œ stderr éƒ½é‡å®šå‘åˆ°æ–‡ä»¶

<div class="fragment">

å¸¸è§ç”¨æ³•ï¼š

- echo "Hello world" > *file*ï¼šå°†å­—ç¬¦ä¸² Hello world å†™å…¥ *file*
- cat *file1* *file2* > *file3*ï¼šå°† *file1* å’Œ *file2* æ‹¼æ¥ï¼Œè¾“å‡ºåˆ° *file3*
- diff *file1* *file2* > *file3*ï¼šå°† *file1* å’Œ *file2* çš„å·®å¼‚å†™å…¥ *file3*
- ./a.out < *file*ï¼šå°† *file* ä½œä¸º a.out çš„è¾“å…¥

</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ç®¡é“

- é€šè¿‡ç®¡é“ï¼ˆpipeï¼‰å¯ä»¥å°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥
- ä½¿ç”¨ç®¡é“æ“ä½œç¬¦ |ï¼Œå°†å·¦ä¾§å‘½ä»¤çš„ stdout è¿æ¥åˆ°å³ä¾§å‘½ä»¤çš„ stdin
- é€šè¿‡ç®¡é“å¯ä»¥å°†å¤šä¸ªå‘½ä»¤è¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå‘½ä»¤åºåˆ—ï¼Œå¯ä»¥é€šè¿‡ä¸€è¡Œå‘½ä»¤æ¥å®Œæˆç›¸å¯¹å¤æ‚çš„æ“ä½œï¼ˆe.g. [SadServers](https://sadservers.com) Saskatoonï¼‰
```bash
$ cat /home/admin/access.log | cut -d ' ' -f 1 | sort | uniq -c | sort | tail -n 1
```
- å¤æ‚å‘½ä»¤çœ‹ä¸æ‡‚ï¼Ÿæ¨è [explainshell](https://explainshell.com)

å¸¸è§ç”¨æ³•ï¼š

- *some cmd* | tail -n *lines*ï¼šåªè¾“å‡ºæœ€å *lines* è¡Œ
- *some cmd* | lessï¼šåˆ†é¡µè¾“å‡º
- *some cmd* | grep *pattern*ï¼šåœ¨è¾“å‡ºä¸­æŸ¥æ‰¾åŒ¹é… *pattern* çš„è¡Œ
- ä¸ cut / sort / uniq / awk ç­‰å‘½ä»¤æ­é…ï¼Œå¤„ç†æ–‡æœ¬æ•°æ®
- ...

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ç¯å¢ƒå˜é‡

- è®°å½•äº†ç³»ç»Ÿä¿¡æ¯çš„å˜é‡ï¼Œå¯ä¾›ç¨‹åºè¯»å–
- é€šè¿‡ echo $*var* æ¥è¾“å‡ºæŸä¸€ç¯å¢ƒå˜é‡çš„å€¼ï¼Œ`env` å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡
- ä¸€ä¸ªå…³äºç¯å¢ƒå˜é‡å’Œ shell å‘½ä»¤æ‰§è¡Œçš„ä¾‹å­
    - ğŸ¤” å‘½ä»¤æ˜¯ä»€ä¹ˆï¼ˆä¾‹å¦‚ `ls`ï¼‰ï¼Ÿ
    - -> ç»å¤§éƒ¨åˆ†éƒ½æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆ`/bin/ls`ï¼‰ï¼Œæ‰§è¡Œå‘½ä»¤å°±æ˜¯æ‰§è¡Œç¨‹åº
    - ğŸ¤” ä¸ºä»€ä¹ˆ shell å¯ä»¥åªé€šè¿‡ `ls` å°±æ‰¾åˆ° `/bin/ls` è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Ÿ
    - -> åœ¨ `PATH` ç¯å¢ƒå˜é‡ä¸­æŸ¥æ‰¾
    - ğŸ¤” ä¸ºä»€ä¹ˆä¸€å®šè¦ç”¨ ./a.out è€Œä¸æ˜¯ a.out æ¥æ‰§è¡Œç¨‹åºï¼Ÿ
    - -> å› ä¸º .ï¼ˆå³å½“å‰ç›®å½•ï¼‰å¹¶ä¸åœ¨ `PATH` å˜é‡ä¸­
- è®¾ç½®ç¯å¢ƒå˜é‡
    - export *var*=*value*ï¼šè®¾ç½®ç¯å¢ƒå˜é‡
        - ä»…åœ¨å½“å‰æ‰§è¡Œçš„ shell ä¸­æœ‰æ•ˆã€‚å¦‚ä½•æŒä¹…åŒ–ï¼Ÿå†™å…¥é…ç½®æ–‡ä»¶
    - unset *var*ï¼šåˆ é™¤ç¯å¢ƒå˜é‡

<aside class="notes"><p>. is usually not in, and should not be in PATH</p>
</aside></script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## \* Bonusï¼šC è¯­è¨€ä¸­å¦‚ä½•è¯»å–ç¯å¢ƒå˜é‡ï¼Ÿ

```c
int main(void);  // int main();
int main(int argc, char *argv[]);
int main(int argc, char *argv[], char **envp);
```

<br>

<div class="fragment">

```c
#include <stdio.h>

// ä¾æ¬¡è¾“å‡ºæ‰€æœ‰çš„ç¯å¢ƒå˜é‡
int main(int argc, char *argv[], char **envp) {
  while (*envp)
    printf("%s\n", *envp++);
}
```

</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## \* é…ç½®æ–‡ä»¶

- æœ¬è´¨ä¸Šæ˜¯åœ¨åŠ è½½ shell æ—¶æ‰§è¡Œçš„ä¸€äº›è„šæœ¬æ–‡ä»¶
    - æ¯”å¦‚ Linux ä¸Š bash åœ¨å¯åŠ¨æ—¶ä¼šä¾æ¬¡åŠ è½½ï¼ˆæ‰§è¡Œï¼‰ä»¥ä¸‹æ–‡ä»¶ï¼ˆæœ‰çœç•¥ï¼‰ï¼š<br>
        /etc/environment -> /etc/profile -> ~/.profile -> ~/.bashrc
    - æ‰€ä»¥åªè¦å°† export è¯­å¥å†™å…¥ä»¥ä¸Šæ–‡ä»¶ä¸­çš„ä¸€ä¸ªï¼ˆä¸€èˆ¬æ˜¯ ~/.bashrcï¼‰ä»¥åç”¨ bash å°±ä¼šè‡ªåŠ¨è®¾ç½®ç¯å¢ƒå˜é‡
- è®¾ç½®äº† shell çš„é…ç½®æ–‡ä»¶åï¼Œé‡å¼€æ–° shell æ‰ä¼šæœ‰æ•ˆæœ
    - ä¸æƒ³é‡å¼€ï¼Ÿå¯ä»¥ä½¿ç”¨ source *file* æ¥ç«‹åˆ»åŠ è½½æŸä¸€é…ç½®æ–‡ä»¶
        - ç›¸å½“äºåœ¨å½“å‰ shell ç›´æ¥æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹
- é™¤äº† shell çš„é…ç½®æ–‡ä»¶å¤–ï¼Œå…¶ä»–ç¨‹åºçš„é…ç½®æ–‡ä»¶ä¹Ÿç»å¸¸å­˜æ”¾åœ¨ home ä¸‹
    - ä¸”é€šå¸¸ä»¥ . å¼€å¤´ï¼ˆéšè—ï¼‰
    - æ¯”å¦‚åé¢ä¼šè¯´åˆ°çš„ ~/.vimrc

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## More?

- è¿”å›å€¼ï¼Ÿ
- æ¡ä»¶åˆ¤æ–­ï¼Ÿ
- å¾ªç¯ï¼Ÿ
- å‘½ä»¤åµŒå¥—ï¼Ÿ
- å‡½æ•°ï¼Ÿ

<br>

Further reading:
- ğŸ† [The Missing Semester - Shell Tools and Scripting](https://missing.csail.mit.edu/2020/shell-tools/)
- [OCF Lecture 2 - Shell Scripting](https://docs.google.com/presentation/d/1SYoC8j1qiM4CuhSArouJbhLpUfDAfyuFMF8r7R4Y0_Y)

</script></section></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

<div class="middle center">
<div style="width: 100%">

# Part.3 vim åŸºç¡€ç”¨æ³•

</div>
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä»€ä¹ˆæ˜¯ vimï¼Ÿ

- vi å’Œ vimï¼Ÿ
    - vi: ç”± `ex` å‘å±•è€Œæ¥çš„è€ç‰Œæ–‡æœ¬ç¼–è¾‘å™¨
    - vim: Vi IMprovedï¼Œvi çš„å‡çº§ç‰ˆï¼ŒåŠŸèƒ½æ›´å¼ºå¤§
        - Bram Moolenaar, 1961 - 2023.8.3
- åŸºäºå‘½ä»¤è¡Œçš„å…¨å¹³å°æ–‡æœ¬/ä»£ç ç¼–è¾‘å™¨
- å¦‚ä½•åœ¨ä½ çš„ç”µè„‘ä¸Šä½¿ç”¨ vim
    - Linux/macOSï¼šç›´æ¥é€šè¿‡åŒ…ç®¡ç†å™¨ï¼ˆapt/yum/brew ç­‰ï¼‰å®‰è£…
    - Windowsï¼š
        - ä½¿ç”¨ WSLï¼Œåœ¨é‡Œé¢å®‰è£… vim
        - ä½¿ç”¨ [Gvim](https://www.vim.org/download.php) æˆ– [Neovim](https://neovim.io)
    - VSCode çš„ [vim æ’ä»¶](https://marketplace.visualstudio.com/items?itemName=vscodevim.vim)ä¹Ÿæ˜¯ä¸€ä¸ªé€‰æ‹©
    - Neovimï¼švim çš„ä¸€ä¸ª forkï¼Œå¯é…åˆ [LunarVim](https://www.lunarvim.org) å¼€ç®±å³ç”¨

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## æ¨¡å¼

- vim ä¸­æœ‰å¤šç§æ¨¡å¼ï¼Œå¯ä»¥è®©ä½ åªé€šè¿‡é”®ç›˜å°±å®Œæˆå„ç§æ“ä½œ
- å¸¸ç”¨æ¨¡å¼ï¼š
    - Normal æ¨¡å¼ï¼šé»˜è®¤æ¨¡å¼ï¼Œç”¨äºç§»åŠ¨å…‰æ ‡ã€å¤„ç†æ–‡æœ¬ã€æ‰§è¡Œå‘½ä»¤ç­‰
    - Insert æ¨¡å¼ï¼šç”¨äºè¾“å…¥æ–‡æœ¬
    - Command æ¨¡å¼ï¼šç”¨äºæ‰§è¡Œå‘½ä»¤
    - \* Visual æ¨¡å¼ï¼šç”¨äºé€‰æ‹©æ–‡æœ¬

<div style="text-align: center; margin-top: 0.5em;">
<img src="lec1/modes.png" width="70%" style="margin: 0 auto;">
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## Cheat Sheet

- From [vimcheatsheet.com](https://vimcheatsheet.com)

<div style="text-align: center; margin-top: 0.5em;">
<img src="lec1/vimcheatsheet.png" width="70%" style="margin: 0 auto;">
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## Cheat Sheet

- From [ViEmu](http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html)

<div style="text-align: center; margin-top: 0.5em;">
<img src="lec1/vim-cheat-sheet.gif" width="70%" style="margin: 0 auto;">
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## vim åŸºç¡€æ“ä½œ

- åŒç³»åˆ—æ›´å¤šæ•™ç¨‹å›¾ç‰‡è§ [ViEmu](http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html)

<div style="text-align: center; margin-top: 0.5em;">
<img src="lec1/vi-vim-tutorial-1.gif" width="70%" style="margin: 0 auto;">
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## \* vim é…ç½®æ–‡ä»¶

- é€šè¿‡ ~/.vimrc æ–‡ä»¶æ¥è¿›è¡Œé…ç½®
- æˆ‘ä¸ªäººçš„å‡ æ¡ç®€å•é…ç½®ï¼š

```text
syntax on           " å¯ç”¨è¯­æ³•é«˜äº®
colorscheme slate   " é¢œè‰²ä¸»é¢˜
set tabstop=4       " Tab ç®—ä½œçš„ç©ºæ ¼æ•°
set expandtab       " ç”¨ç©ºæ ¼æ›¿æ¢ Tab
set softtabstop=4   " è¾“å…¥ Tab æ—¶æ›¿æ¢çš„ç©ºæ ¼æ•°
set shiftwidth=4    " è‡ªåŠ¨ç¼©è¿›ç©ºæ ¼æ•°
set autoindent      " è‡ªåŠ¨ç¼©è¿›
set smartindent     " æ™ºèƒ½ç¼©è¿›
set number          " è¡Œå·
set ruler           " æ˜¾ç¤ºå…‰æ ‡æ‰€åœ¨è¡Œåˆ—
set scrolloff=3     " å…‰æ ‡ä¸Šä¸‹ä¸¤ä¾§ä¿ç•™çš„è¡Œæ•°
set showmatch       " æç¤ºé…å¯¹çš„æ‹¬å·
set hlsearch        " é«˜äº®æ˜¾ç¤ºæœç´¢ç»“æœ
set incsearch       " å®æ—¶æ˜¾ç¤ºæœç´¢ç»“æœ
```

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## vim å­¦ä¹ èµ„æº

- ğŸ† è‡ªå¸¦æ•™ç¨‹ï¼švimtutor å‘½ä»¤
- [Vim Adventures](https://vim-adventures.com)ï¼šé€šè¿‡æ¸¸æˆçš„æ–¹å¼å­¦ä¹  vim
- Cheat Sheets:
    - [vimcheatsheet.com](https://vimcheatsheet.com)
    - [ViEmu](http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html)
    - [vim.rtorr.com](https://vim.rtorr.com/lang/zh_cn) åœ¨çº¿æ–‡å­—ç‰ˆ
- Vim ä»å…¥é—¨åˆ°ç²¾é€šï¼š[wsdjeg/vim-galore-zh_cn](https://github.com/wsdjeg/vim-galore-zh_cn)

</script></section></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

<div class="middle center">
<div style="width: 100%">

# Part.4 GNU Make ç®€ä»‹

</div>
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä¸ºä»€ä¹ˆè¦ç”¨ `make`ï¼Ÿ

- ä¸€ä¸ªè¯æ¥è¯´å°±æ˜¯ï¼š**è‡ªåŠ¨åŒ–**
- åªéœ€è¦å†™ä¸€ä¸ª Makefileï¼Œå°±å¯ä»¥é€šè¿‡ä¸€å¥å‘½ä»¤æ¥è‡ªåŠ¨åŒ–åœ°å®Œæˆç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²ç­‰ä¸€ç³»åˆ—æ“ä½œ
    - å³ä½¿æ˜¯ Linux å†…æ ¸ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸€å¥ `make` æ¥å®Œæˆç¼–è¯‘
- ä¸ä»…ä»…ç”¨æ¥ç¼–è¯‘ C/C++ï¼Œä»»ä½•å‘½ä»¤éƒ½å¯ä»¥æ‰§è¡Œ
    - æ¯”å¦‚è¯´åœ¨ç¼–å†™æœ¬è¯¾ç¨‹ slide çš„æ—¶å€™ï¼Œå°±æ˜¯ç”¨ make æ¥ç®€åŒ–è¾“å…¥å‘½ä»¤çš„
    - æœ‰äº›æ—¶å€™ä¼šæ¯” shell è„šæœ¬æ›´å®¹æ˜“ç¼–å†™
        - å¤„ç†ä¾èµ–ã€è¯»å–å‘½ä»¤è¡Œè¾“å…¥ç­‰ make éƒ½ä¼šå¸®ä½ å®Œæˆ

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä¸ºä»€ä¹ˆè¦ç”¨ `make`ï¼Ÿ

<div style="text-align: center; margin-top: 0.5em;">
<img src="lec0/makefile.png" width="65%" style="margin: 0 auto;">
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ç®€ä»‹ï¼šå¦‚ä½•ç¼–å†™ Makefile

```make
target: prerequisites...
    commands...
    commands...
```

- target: ç›®æ ‡æ–‡ä»¶/å¯æ‰§è¡Œæ–‡ä»¶/æ ‡ç­¾
    - .PHONY å®šä¹‰ä¼ªç›®æ ‡
        ```make
        .PHONY: clean
        ```
- prerequisites: ä¾èµ–çš„ target
- command: ä¸€ç³»åˆ—æ‰§è¡Œçš„å‘½ä»¤
    - å³è§¦å‘ target æ—¶æ‰§è¡Œçš„ shell å‘½ä»¤
    - å¼€å¤´åŠ  `@` ä¸ä¼šåœ¨ç»ˆç«¯è¾“å‡ºå‘½ä»¤æœ¬èº«
    - å¼€å¤´åŠ  `-` ä¼šå¿½ç•¥å‘½ä»¤æ‰§è¡Œå¤±è´¥çš„é”™è¯¯ï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œ

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ç®€ä»‹ï¼šå¦‚ä½•ç¼–å†™ Makefile

```make [|1|3-4|6-7]
CFLAGS = -std=c99

main.out: main.o aux.o
    gcc $^ -o $@ $(CFLAGS)

%.o: %.c
    gcc -c $< -o $@ $(CFLAGS)
```

è¿™æ®µ Makefile å¹²äº†ä»€ä¹ˆï¼Ÿ

<!-- <div class="fragment"> -->

- å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼š`CFLAGS`ï¼Œå€¼ä¸º "-std=c99"
- å®šä¹‰äº†äº§ç”Ÿ `main.out` çš„æ­¥éª¤
- å®šä¹‰äº†ä» `.c` æ–‡ä»¶äº§ç”Ÿ `.o` æ–‡ä»¶çš„æ­¥éª¤ï¼ˆç¼–è¯‘ï¼‰

<!-- </div> -->

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ç®€ä»‹ï¼šMakefile å˜é‡

- å˜é‡å®šä¹‰ï¼š
    |è¯­æ³•|è§£é‡Š|
    |----|----|
    |VAR = value|value ä¼šåœ¨ä½¿ç”¨æ—¶æ‰è¢«å±•å¼€ï¼ˆå¯ä»¥åœ¨æ–‡ä»¶ä»»ä½•ä½ç½®ï¼‰|
    |VAR := value|å³è¾¹çš„ value ä¼šåœ¨å®šä¹‰æ—¶å°±è¢«å±•å¼€|
    |VAR ?= value|å¦‚æœ VAR æœªå®šä¹‰ï¼Œåˆ™å®šä¹‰ä¸º value|
    |VAR += value|å°† value è¿½åŠ åˆ° VAR çš„æœ«å°¾|
- å˜é‡å¼•ç”¨ï¼š
    - `$(VAR)` æˆ– `${VAR}`ï¼šå¼•ç”¨å˜é‡ VAR
    - ä¼šä»¥â€œå­—ç¬¦ä¸²â€çš„å½¢å¼å±•å¼€ï¼ˆç±»ä¼¼ C ä¸­çš„å®å±•å¼€ï¼‰
    - å¯ä»¥é€šè¿‡ $(shell *command*) æ¥å°† *command* çš„è¾“å‡ºç»“æœä½œä¸ºæ›¿æ¢çš„å€¼
    - Make å†…ç½®æŸäº›å˜é‡ï¼Œå¦‚ `$(PATH)`ã€`$(MAKE)`

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ç®€ä»‹ï¼šmake å‘½ä»¤

- make åé¢å¯ä»¥è·Ÿå¤šä¸ª targetï¼ŒæŒ‡å®šæ‰§è¡Œçš„å†…å®¹
    ```shell
    $ make a.o b.o c.o
    ```
    - å¦‚æœä¸è·Ÿä»»ä½• targetï¼Œåˆ™é»˜è®¤æ‰§è¡Œ Makefile ä¸­å®šä¹‰çš„ç¬¬ä¸€ä¸ª target
- å¯ä»¥åœ¨ make åé¢ç›´æ¥é€šè¿‡ `VAR=value` çš„å½¢å¼æ¥å®šä¹‰å˜é‡
    ```shell
    $ make a.o CFLAGS="-std=c11 -Wall"
    ```
    - ä¼˜å…ˆçº§ï¼šmake çš„å‚æ•° > Makefile ä¸­çš„å®šä¹‰ > ç¯å¢ƒå˜é‡
- make å‘½ä»¤çš„å¸¸ç”¨å‚æ•°ï¼š
    - make -f *FILE*ï¼šæŒ‡å®š Makefile æ–‡ä»¶
    - make -nï¼šåªæ˜¾ç¤ºå‘½ä»¤ï¼Œè€Œä¸å®é™…æ‰§è¡Œï¼ˆdry-runï¼‰
    - make -j *N*ï¼šå¹¶è¡Œæ‰§è¡Œ *N* ä¸ªä»»åŠ¡
    - make -kï¼šå¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## More?

- æ¡ä»¶åˆ¤æ–­ï¼Ÿ
- å‡½æ•°ï¼Ÿ
- æ¨¡å¼è§„åˆ™ï¼Ÿæ¨¡å¼å˜é‡ï¼Ÿ
- éšå«è§„åˆ™ï¼Ÿéšå«å˜é‡ï¼Ÿ
- è‡ªåŠ¨åŒ–å˜é‡ `$@` ç­‰ï¼Ÿ

<br>

Further reading:
- ğŸ† å’Œæˆ‘ä¸€èµ·å†™ Makefileï¼š[seisman/how-to-write-makefile](https://seisman.github.io/how-to-write-makefile/)
- GNU make å®˜æ–¹æ–‡æ¡£ï¼š[GNU make](https://www.gnu.org/software/make/manual/make.html)

</script></section></section><section ><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

<div class="middle center">
<div style="width: 100%">

# Part.5 å…¶ä»–å‘½ä»¤è¡Œå·¥å…·æ¨è

</div>
</div>

</script></section><section data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/background.png" -->

## ä¸€äº›æ¨èçš„å‘½ä»¤è¡Œå·¥å…·

- [sharkdp/bat](https://github.com/sharkdp/bat)ï¼šç±»ä¼¼äº cat çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒè¯­æ³•é«˜äº®ï¼ˆRust å®ç°ï¼‰
- [sharkdp/fd](https://github.com/sharkdp/fd)ï¼šå¢å¼ºç‰ˆ findï¼ˆRust å®ç°ï¼‰
- [sharkdp/hexyl](https://github.com/sharkdp/hexyl)ï¼šæ›´ç¾è§‚çš„å‘½ä»¤è¡Œåå…­è¿›åˆ¶æŸ¥çœ‹å™¨ï¼ˆRust å®ç°ï¼‰
- [eza-community/eza](https://github.com/eza-community/eza)ï¼šå¢å¼ºç‰ˆ lsï¼ˆRust å®ç°ï¼‰
- [ajeetdsouza/zoxide](https://github.com/ajeetdsouza/zoxide)ï¼šå¢å¼ºç‰ˆ cdï¼Œè‡ªå¸¦ autojump åŠŸèƒ½ï¼ˆRust å®ç°ï¼‰
- [BurntSushi/ripgrep](https://github.com/BurntSushi/ripgrep)ï¼šæ›´å¿«çš„ grepï¼ˆRust å®ç°ï¼‰
- [root-project/cling](https://github.com/root-project/cling)ï¼šäº¤äº’å¼ C++ è§£é‡Šå™¨
- [FFmpeg/FFmpeg](https://github.com/FFmpeg/FFmpeg)ï¼šå¼ºå¤§çš„å‘½ä»¤è¡ŒéŸ³é¢‘ã€è§†é¢‘åŠå­—å¹•å¤„ç†å¥—ä»¶
- [ImageMagick/ImageMagick](https://github.com/ImageMagick/ImageMagick)ï¼šå¼ºå¤§çš„å›¾ç‰‡å¤„ç†ã€è½¬æ¢åŠç¼–è¾‘å¥—ä»¶
- [aristocratos/btop](https://github.com/aristocratos/btop)ï¼šç±»ä¼¼ top çš„å‘½ä»¤è¡Œèµ„æºç›‘æ§å·¥å…·~~ï¼ˆçœ‹é—¨è€å¤§çˆ·çœ‹æ¿ï¼‰~~
- [fastfetch-cli/fastfetch](https://github.com/fastfetch-cli/fastfetch)ï¼šæ›´æ¼‚äº®åœ°æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯~~ï¼ˆè£…é€¼ä¸“ç”¨ï¼‰~~
- [tldr-pages/tldr](https://github.com/tldr-pages/tldr)ï¼šman æ›¿ä»£å“ï¼Œå‘½ä»¤é€ŸæŸ¥

</script></section></section><section  data-markdown><script type="text/template">
<!-- .slide: data-background="lec1/ending.png" -->
</script></section></div>
    </div>

    <script src="./dist/reveal.js"></script>

    <script src="./plugin/markdown/markdown.js"></script>
    <script src="./plugin/highlight/highlight.js"></script>
    <script src="./plugin/zoom/zoom.js"></script>
    <script src="./plugin/notes/notes.js"></script>
    <script src="./plugin/math/math.js"></script>
    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default',
        slideNumber: true,
        menu: {
          themes: false,
          width: "wide",
          transitions: false,
          markers: true,
          hideMissingTitles: true,
          openButton: true,
          openSlideNumber: true,
          custom: [
            { title: 'Lectures', icon: '<i class="fas fa-external-link-alt">', content: getLecturesMenu() },
          ]
        },
        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealZoom,
          RevealNotes,
          RevealMath.KaTeX,
          RevealMenu
        ]
      };

      // options from URL query string
      var queryOptions = Reveal().getQueryHash() || {};

      var options = extend(defaultOptions, {"transition":"slide","transitionSpeed":"fast","center":false,"slideNumber":"c/t","width":1000}, queryOptions);

      function getLecturesMenu() {
        var lectures = [
          { name: "#0 å‰ç»ï¼šé€šå¾€ Pro çš„ç¬¬ä¸€æ­¥", src: "../lec0/"},
          { name: "#1 Shell åŸºç¡€åŠ CLI å·¥å…·æ¨è", src: "../lec1/"},
          { name: "#2 Git/GitHub åŠå¼€æºåŸºç¡€", src: "../lec2/"},
          { name: "#3 Markdown è¯­æ³•åŠåº”ç”¨", src: "../lec3/"},
          { name: "#4 LaTeX æ’ç‰ˆç®€è¦ä»‹ç»", src: "../lec4/"},
          { name: "#5 å¦‚ä½•æ’å‡ºè§„èŒƒã€ç¾è§‚çš„æ–‡æ¡£", src: "../lec5/"},
          { name: "#6 ç½‘ç»œ/ç½‘ç«™åŸºç¡€çŸ¥è¯†æ¦‚è¿°", src: "../lec6/"},
        ]
        var lecturesMenu = '<ul class="slide-menu-items">';
        for (var i=0; i < lectures.length; i++) {
          lecturesMenu += '<li class="slide-menu-item"><a href="' + lectures[i].src + '" style="text-decoration:none">' + lectures[i].name + '</a></li>';
        }
        lecturesMenu += '</ul>';
        return lecturesMenu;
      }
    </script>

    <script src="https://cdn.tonycrane.cc/heti/heti.js"></script>
    <script src="./assets/heti_worker.js"></script>

    <script>
      Reveal.initialize(options).then(() => {
        document.querySelector(".backgrounds").setAttribute("style", document.querySelector(".slides").style.cssText);
      });
      Reveal.on('overviewshown', event => {
        document.querySelector(".backgrounds").setAttribute("style", "");
      });
      Reveal.on('overviewhidden', event => {
        document.querySelector(".backgrounds").setAttribute("style", document.querySelector(".slides").style.cssText);
      });
      Reveal.on('resize', event => {
        document.querySelector(".backgrounds").setAttribute("style", document.querySelector(".slides").style.cssText);
      });
    </script>
  </body>
</html>